WEBVTT
Kind: captions
Language: zh-CN

00:00:00.000 --> 00:00:05.040
这是使用闭包创建私有状态的 myCounter 函数

00:00:05.040 --> 00:00:08.765
首先有一个局部变量 count 设成了 0

00:00:08.765 --> 00:00:10.995
myCounter 返回一个使 count 加一的函数

00:00:10.994 --> 00:00:14.554
然后返回 count

00:00:14.554 --> 00:00:18.277
最酷的是这个函数具有可改变的私有状态

00:00:18.277 --> 00:00:20.219
但是无法在外部被访问

00:00:20.219 --> 00:00:22.714
因为它在这个 count 变量上闭包了

00:00:22.714 --> 00:00:25.289
我将调用 myCounter

00:00:25.289 --> 00:00:29.559
并将返回的值保存到变量中 称之为 counter

00:00:29.559 --> 00:00:33.379
现在调用该函数

00:00:33.380 --> 00:00:35.705
调用它后 结果是 1

00:00:35.704 --> 00:00:37.679
比原始计数 0 大 1

00:00:37.679 --> 00:00:41.005
再次调用它

00:00:41.005 --> 00:00:46.370
现在结果是 2 再次调用它 结果为 3

00:00:46.369 --> 00:00:47.954
因为 count 不断增大

00:00:47.954 --> 00:00:51.759
我们知道它的状态可以保留 并且可以被修改

00:00:51.759 --> 00:00:55.969
这就是每次调用 counter 时发生的情况 结果分别为 1 2 3

00:00:55.969 --> 00:00:57.174
现在尝试执行其他操作

00:00:57.174 --> 00:00:59.834
我尝试访问 count 变量

00:00:59.835 --> 00:01:04.245
在此之前 我清空下屏幕 留出更多空间

00:01:04.245 --> 00:01:07.418
我将显示之前的一些代码以供参考

00:01:07.418 --> 00:01:14.704
如果我们尝试访问 count 变量 它显示 undefined

00:01:14.703 --> 00:01:17.304
如果直接输入 count 呢？系统报错了

00:01:17.305 --> 00:01:20.470
使用闭包创建私有状态的真正好处是

00:01:20.469 --> 00:01:23.379
闭包本身之外的任何函数

00:01:23.379 --> 00:01:27.609
根本无法访问 count 状态或 count 数据

00:01:27.609 --> 00:01:29.995
私有状态很实用

00:01:29.995 --> 00:01:33.070
因为现在用户无法意外地重置该 count 了

00:01:33.069 --> 00:01:36.159
外部函数根本无法访问该数据

